<div class="min-h-dvh bg-[#2f2f2f] px-3 py-6 text-[#222]">
  <div class="mx-auto w-full max-w-[430px] overflow-hidden rounded-sm bg-white shadow-lg">
    <div class="bg-[#ffd400] px-4 pt-3 pb-4">
      <div class="flex items-center justify-center gap-2">
        <img src="/assets/images/nokair-logo.png" alt="Nok Air" class="h-7 w-auto" />
      </div>
      <div class="mt-3">
        <div class="relative mx-auto max-w-[380px]">
          <div
            class="absolute left-6 right-6 top-1/2 -translate-y-1/2 border-t border-dashed border-[#c9a200]"
          ></div>
          <div
            class="relative flex items-center justify-between text-[11px] font-medium text-[#6a6a6a]"
          >
            <div class="flex flex-col items-center gap-1">
              <span class="grid h-6 w-6 place-items-center rounded-full bg-[#4c4c4c] text-white"
                >1</span
              >
              <span class="text-[#303030]">Enter Details</span>
            </div>

            <div class="flex flex-col items-center gap-1">
              <span
                class="grid h-6 w-6 place-items-center rounded-full border border-[#b18a00] bg-[#ffd400] text-[#303030]"
                >2</span
              >
              <span>Select Seat</span>
            </div>

            <div class="flex flex-col items-center gap-1">
              <span
                class="grid h-6 w-6 place-items-center rounded-full border border-[#b18a00] bg-[#ffd400] text-[#303030]"
                >3</span
              >
              <span>Review</span>
            </div>

            <div class="flex flex-col items-center gap-1">
              <span
                class="grid h-6 w-6 place-items-center rounded-full border border-[#b18a00] bg-[#ffd400] text-[#303030]"
                >4</span
              >
              <span>Confirm &amp; Pay</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- passenger tabs -->
    <div class="flex gap-2 overflow-x-auto border-b border-[#ededed] bg-white px-3 py-3">
      @for (tab of passengerTabs; track tab; let idx = $index) {
        <button
          type="button"
          class="min-w-[110px] rounded border px-3 py-2 text-sm"
          [ngClass]="
            idx + 1 === currentPassenger
              ? 'border-[#ffd400] bg-[#fff7cf] text-[#1f1f1f]'
              : 'border-[#dcdcdc] bg-white text-[#a7a7a7]'
          "
        >
          {{ tab }}
        </button>
      }
    </div>

    <!-- form -->
    <form [formGroup]="bookingForm" (ngSubmit)="onSubmit()" class="px-4 py-4">
      <!-- titles -->
      <h2 class="text-base font-bold">Passenger 1 (Primary passenger)</h2>

      <h3 class="mt-3 text-sm font-bold text-[#1f1f1f]">General Information</h3>

      <!-- Field block helper styles:
           - label: text-xs
           - input: hlmInput + custom border
      -->
      <div class="mt-3 space-y-3">
        <!-- Title -->
        <div>
          <label hlmLabel for="title" class="text-xs font-medium text-[#2a2a2a]"
            >Title <span class="text-red-500">*</span></label
          >

          <select
            id="title"
            formControlName="title"
            class="mt-1 h-10 w-full rounded-md border bg-white px-3 text-sm outline-none focus:border-[#222]"
            [ngClass]="isInvalid('title') ? 'border-red-400' : 'border-[#cfcfcf]'"
          >
            <option value="">Title</option>
            @for (option of titleOptions; track option) {
              <option [value]="option">{{ option }}</option>
            }
          </select>

          @if (isInvalid('title')) {
            <p class="mt-1 text-[11px] text-red-500">Please select a title.</p>
          }
        </div>

        <!-- First name -->
        <div>
          <label hlmLabel for="firstName" class="text-xs font-medium text-[#2a2a2a]"
            >First Name (English) <span class="text-red-500">*</span></label
          >
          <input
            id="firstName"
            hlmInput
            formControlName="firstName"
            placeholder=" "
            class="mt-1 h-10 w-full rounded-md border border-[#cfcfcf] bg-white text-sm focus:border-[#222]"
            [ngClass]="isInvalid('firstName') ? '!border-red-400' : ''"
          />
          @if (isInvalid('firstName')) {
            <p class="mt-1 text-[11px] text-red-500">English letters only.</p>
          }
        </div>

        <!-- Middle name -->
        <div>
          <label hlmLabel for="middleName" class="text-xs font-medium text-[#2a2a2a]"
            >Middle Name (English)</label
          >
          <input
            id="middleName"
            hlmInput
            formControlName="middleName"
            placeholder="Middle Name (English)"
            class="mt-1 h-10 w-full rounded-md border border-[#cfcfcf] bg-white text-sm focus:border-[#222]"
            [ngClass]="isInvalid('middleName') ? '!border-red-400' : ''"
          />
          @if (isInvalid('middleName')) {
            <p class="mt-1 text-[11px] text-red-500">English letters only.</p>
          }
        </div>

        <!-- Last name -->
        <div>
          <label hlmLabel for="lastName" class="text-xs font-medium text-[#2a2a2a]"
            >Last Name (English) <span class="text-red-500">*</span></label
          >
          <input
            id="lastName"
            hlmInput
            formControlName="lastName"
            placeholder="Last Name (English)"
            class="mt-1 h-10 w-full rounded-md border border-[#cfcfcf] bg-white text-sm focus:border-[#222]"
            [ngClass]="isInvalid('lastName') ? '!border-red-400' : ''"
          />
          @if (isInvalid('lastName')) {
            <p class="mt-1 text-[11px] text-red-500">English letters only.</p>
          }
        </div>

        <!-- DOB -->
        <div>
          <label hlmLabel for="dateOfBirth" class="text-xs font-medium text-[#2a2a2a]"
            >Date of Birth <span class="text-red-500">*</span></label
          >
          <input
            id="dateOfBirth"
            hlmInput
            type="date"
            formControlName="dateOfBirth"
            class="mt-1 h-10 w-full rounded-md border border-[#cfcfcf] bg-white text-sm focus:border-[#222]"
            [ngClass]="isInvalid('dateOfBirth') ? '!border-red-400' : ''"
          />
          @if (isInvalid('dateOfBirth')) {
            <p class="mt-1 text-[11px] text-red-500">Please select your date of birth.</p>
          }
        </div>
      </div>

      <!-- Passport -->
      <h3 class="mt-5 text-sm font-bold text-[#1f1f1f]">Passport Information</h3>

      <div class="mt-3 space-y-3">
        <div class="grid grid-cols-2 gap-2">
          <div>
            <label hlmLabel for="nationality" class="text-xs font-medium text-[#2a2a2a]"
              >Nationality <span class="text-red-500">*</span></label
            >
            <select
              id="nationality"
              formControlName="nationality"
              class="mt-1 h-10 w-full rounded-md border bg-white px-3 text-sm outline-none focus:border-[#222]"
              [ngClass]="isInvalid('nationality') ? 'border-red-400' : 'border-[#cfcfcf]'"
            >
              <option value="">Nationality</option>
              @for (country of countries; track country) {
                <option [value]="country">{{ country }}</option>
              }
            </select>
            @if (isInvalid('nationality')) {
              <p class="mt-1 text-[11px] text-red-500">Please select.</p>
            }
          </div>

          <div>
            <label hlmLabel for="countryOfResidence" class="text-xs font-medium text-[#2a2a2a]"
              >Country of residence <span class="text-red-500">*</span></label
            >
            <select
              id="countryOfResidence"
              formControlName="countryOfResidence"
              class="mt-1 h-10 w-full rounded-md border bg-white px-3 text-sm outline-none focus:border-[#222]"
              [ngClass]="isInvalid('countryOfResidence') ? 'border-red-400' : 'border-[#cfcfcf]'"
            >
              <option value="">Country</option>
              @for (country of countries; track country) {
                <option [value]="country">{{ country }}</option>
              }
            </select>
            @if (isInvalid('countryOfResidence')) {
              <p class="mt-1 text-[11px] text-red-500">Please select.</p>
            }
          </div>
        </div>

        <div>
          <label hlmLabel for="passportNumber" class="text-xs font-medium text-[#2a2a2a]"
            >Passport Number <span class="text-red-500">*</span></label
          >
          <input
            id="passportNumber"
            hlmInput
            formControlName="passportNumber"
            placeholder="Passport Number"
            class="mt-1 h-10 w-full rounded-md border border-[#cfcfcf] bg-white text-sm focus:border-[#222]"
            [ngClass]="isInvalid('passportNumber') ? '!border-red-400' : ''"
          />
          @if (isInvalid('passportNumber')) {
            <p class="mt-1 text-[11px] text-red-500">6–12 characters.</p>
          }
        </div>

        <div>
          <label hlmLabel for="issuedBy" class="text-xs font-medium text-[#2a2a2a]"
            >Issued By <span class="text-red-500">*</span></label
          >
          <select
            id="issuedBy"
            formControlName="issuedBy"
            class="mt-1 h-10 w-full rounded-md border bg-white px-3 text-sm outline-none focus:border-[#222]"
            [ngClass]="isInvalid('issuedBy') ? 'border-red-400' : 'border-[#cfcfcf]'"
          >
            <option value="">Issued By</option>
            @for (country of countries; track country) {
              <option [value]="country">{{ country }}</option>
            }
          </select>
          @if (isInvalid('issuedBy')) {
            <p class="mt-1 text-[11px] text-red-500">Please select.</p>
          }
        </div>

        <div>
          <label hlmLabel for="passportExpiryDate" class="text-xs font-medium text-[#2a2a2a]"
            >Passport Expiry Date <span class="text-red-500">*</span></label
          >
          <input
            id="passportExpiryDate"
            hlmInput
            type="date"
            formControlName="passportExpiryDate"
            class="mt-1 h-10 w-full rounded-md border border-[#cfcfcf] bg-white text-sm focus:border-[#222]"
            [ngClass]="isInvalid('passportExpiryDate') ? '!border-red-400' : ''"
          />
          @if (isInvalid('passportExpiryDate')) {
            <p class="mt-1 text-[11px] text-red-500">Please select a date.</p>
          }
        </div>
      </div>

      <!-- Contact -->
      <h3 class="mt-5 text-sm font-bold text-[#1f1f1f]">Contact Information</h3>

      <div class="mt-3 space-y-3">
        <div class="grid grid-cols-[110px_1fr] gap-2">
          <div>
            <label hlmLabel for="mobileCountryCode" class="text-xs font-medium text-[#2a2a2a]"
              >Code</label
            >
            <select
              id="mobileCountryCode"
              formControlName="mobileCountryCode"
              class="mt-1 h-10 w-full rounded-md border border-[#cfcfcf] bg-white px-2 text-sm outline-none focus:border-[#222]"
            >
              <option value="+66">+66</option>
              <option value="+65">+65</option>
              <option value="+81">+81</option>
              <option value="+1">+1</option>
            </select>
          </div>

          <div>
            <label hlmLabel for="mobileNumber" class="text-xs font-medium text-[#2a2a2a]"
              >Mobile Number <span class="text-red-500">*</span></label
            >
            <input
              id="mobileNumber"
              hlmInput
              formControlName="mobileNumber"
              placeholder="Mobile Number"
              class="mt-1 h-10 w-full rounded-md border border-[#cfcfcf] bg-white text-sm focus:border-[#222]"
              [ngClass]="isInvalid('mobileNumber') ? '!border-red-400' : ''"
            />
            @if (isInvalid('mobileNumber')) {
              <p class="mt-1 text-[11px] text-red-500">8–15 digits.</p>
            }
          </div>
        </div>

        <div>
          <label hlmLabel for="email" class="text-xs font-medium text-[#2a2a2a]"
            >Email <span class="text-red-500">*</span></label
          >
          <input
            id="email"
            hlmInput
            formControlName="email"
            placeholder="Email"
            class="mt-1 h-10 w-full rounded-md border border-[#cfcfcf] bg-white text-sm focus:border-[#222]"
            [ngClass]="isInvalid('email') ? '!border-red-400' : ''"
          />
          @if (isInvalid('email')) {
            <p class="mt-1 text-[11px] text-red-500">Invalid email format.</p>
          }
        </div>
      </div>

      <!-- buttons -->
      <div class="mt-5 space-y-3 pb-3">
        <button
          type="submit"
          hlmBtn
          class="w-full rounded-md border border-[#1c1c1c] bg-[#ffd400] py-3 text-sm font-semibold text-[#1c1c1c]"
        >
          Continue to Next Passenger →
        </button>

        <button
          type="button"
          hlmBtn
          class="w-full rounded-md bg-[#d4d4d4] py-3 text-sm font-semibold text-[#666]"
          [disabled]="bookingForm.invalid"
        >
          Confirm
        </button>
      </div>
    </form>
  </div>
</div>
